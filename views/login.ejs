<%- include('./partials/header') %>

<!-- ğŸ”” TOAST -->
<% if (typeof toastMsg !== "undefined") { %>
  <div id="toast"
       class="fixed top-6 right-6 z-50 px-6 py-4 rounded-xl shadow-xl text-sm text-white
       <%= toastType === 'error' ? 'bg-red-500' : 'bg-green-500' %>
       animate-slide-in">
    <%= toastMsg %>
  </div>
<% } %>

<section class="min-h-screen flex items-center justify-center pt-24 pb-24 px-6 relative overflow-hidden">

  <!-- BACKGROUND -->
  <div class="absolute inset-0 bg-gradient-to-br from-indigo-800 via-purple-800 to-pink-700"></div>

  <!-- GLOWS -->
  <div class="absolute w-96 h-96 bg-cyan-400/30 blur-[140px] rounded-full -top-20 -left-20"></div>
  <div class="absolute w-96 h-96 bg-pink-400/30 blur-[140px] rounded-full -bottom-20 -right-20"></div>

  <!-- CARD -->
  <div class="relative z-10 w-full max-w-md bg-white/10 backdrop-blur-3xl
              border border-white/20 rounded-3xl shadow-2xl p-8">

    <span class="inline-block mb-4 px-5 py-1.5 rounded-full bg-white/20 text-sm text-white">
      âš¡ Welcome Back
    </span>

    <h1 class="text-3xl font-extrabold leading-tight">
      <span class="text-white">Login to</span>
      <span class="bg-gradient-to-r from-cyan-300 to-blue-400 bg-clip-text text-transparent">
        Scatch
      </span>
    </h1>

    <p class="mt-2 text-sm text-white/80">
      Access your account to shop the latest smartphones, laptops, and gadgets.
    </p>

    <!-- FORM -->
    <form action="/users/login" method="post" class="mt-6 space-y-3">

      <div class="relative">
        <input
          type="email"
          name="email"
          required
          placeholder="Email Address"
          class="w-full px-5 py-3.5 pl-11 rounded-xl outline-none bg-white/90 text-sm"
        />
        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-sm">ğŸ“§</span>
      </div>

      <div class="relative w-full">
        <input
          type="password"
          name="password"
          placeholder="Password"
          required
          class="w-full px-4 pl-11 py-3 rounded-xl outline-none bg-white text-black text-sm focus:ring-2 focus:ring-cyan-400 transition"
        />
        <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm pointer-events-none">ğŸ”’</span>
      </div>

      <button
        class="w-full mt-3 py-3.5 rounded-xl font-semibold text-sm text-white
               bg-gradient-to-r from-cyan-400 to-blue-500
               hover:translate-y-[-2px] hover:shadow-xl transition">
        Login â†’
      </button>
    </form>

          
<% if (typeof showReverify !== "undefined" && showReverify) { %>
  <form action="/users/resend-verification" method="post" class="mt-4 text-center">
    <input type="hidden" name="email" value="<%= email %>">
    <button class="text-sm text-cyan-300 hover:underline">
      ğŸ” Resend verification email
    </button>
  </form>
<% } %>

    <p class="mt-4 text-center text-white/70 text-xs">
      Donâ€™t have an account?
      <a href="/users/register" class="text-cyan-300 hover:underline">
        Create one
      </a>
    </p>

  </div>
</section>

<style>
@keyframes slide-in {
  0% { transform: translateX(120%); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
}
@keyframes slide-out {
  0% { transform: translateX(0); opacity: 1; }
  100% { transform: translateX(120%); opacity: 0; }
}
.animate-slide-in { animation: slide-in 0.5s ease-out forwards; }
.animate-slide-out { animation: slide-out 0.5s ease-in forwards; }
</style>

<script>
  const toast = document.getElementById("toast");
  if (toast) {
    setTimeout(() => {
      toast.classList.remove("animate-slide-in");
      toast.classList.add("animate-slide-out");
    }, 2500);

    setTimeout(() => {
      toast.remove();
    }, 3000);
  }
</script>
